!function(e,t){var i=e.App=e.App||{},a=Staircase.Events;i.SetupStaircase=function(){Staircase.initialize(),this.initialize()},i.SetupStaircase.prototype.initialize=function(){this.camera=new Staircase.Camera("#Video"),this.previewCanvas=new Staircase.PreviewCanvas("#PreviewVideo"),this.previewCanvas.type="camera",this.previewImage=new Staircase.PreviewCanvas("#PreviewImage"),this.previewImage.type="file",this.dnd=new Staircase.DragAndDrop("#DragAndDrop"),this.$camera=$("#Camera"),this.$previewVideo=$("#PreviewVideo"),this.$previewImage=$("#PreviewImage"),this.$screenSelect=$("#screen-select"),this.$screenCamera=$("#screen-camera"),this.$screenUpload=$("#screen-upload"),this.$btnNavigateCamera=$(".btn-navigate-camera"),this.$btnNavigateUpload=$(".btn-navigate-upload"),this.$btnCancel=$(".btn-cancel button"),this.$btnAgain=$(".btn-again button"),this.$btnCapture=$("#CaptureBtn"),this.$btnUpload=$(".btn-upload button"),this.$inputFile=$("#InputFile"),null==this.camera.isSupport&&this.$btnNavigateCamera.hide(),this.switchScreenSelect(),this.eventify()},i.SetupStaircase.prototype.eventify=function(){var e=this;this.$btnNavigateCamera.on("click",function(t){e.switchScreenCamera()}),this.$btnNavigateUpload.on("click",function(){e.switchScreenUpload()}),this.$btnCancel.on("click",function(){e.switchScreenSelect()}),this.$btnAgain.on("click",function(){e.switchScreenCamera()}),this.$btnCapture.on("click",function(t){t.preventDefault();var i=e.camera.getVideo();e.previewCanvas.draw(i),e.$camera.hide(),e.camera.powerOff(),e.$previewVideo.show(),e.$btnCapture.attr("disabled",!0),e.$btnAgain.attr("disabled",!1),e.$btnUpload.attr("disabled",!1)}),this.$btnUpload.on("click",function(t){e.$btnUpload.attr("disabled",!0),e.$inputFile.addClass("disabled"),alert("アップロード！")}),window.URL=window.URL||window.webkitURL,this.$inputFile.on("change",function(t){for(var i=this.files,a=0;a<i.length;a++){var n=i[a],r=/image.*/;if(n.type.match(r)){var s=new Image;s.src=window.URL.createObjectURL(n),s.onload=function(t){e.previewImage.draw(s,s.width,s.height)}}}e.$btnUpload.attr("disabled",!1)}),this.dnd.on(a.DND_LOAD_IMG,function(t,i,a){e.previewImage.draw(i,i.width,i.height)})},i.SetupStaircase.prototype.switchScreenCamera=function(){this.$screenSelect.hide(),this.$screenUpload.hide(),this.$screenUpload.find(".error").hide(),this.$previewVideo.hide(),this.camera.powerOn(),this.$camera.show(),this.$btnAgain.attr("disabled",!0),this.$btnCapture.attr("disabled",!1),this.$screenCamera.show()},i.SetupStaircase.prototype.switchScreenUpload=function(){this.$screenSelect.hide(),this.$screenCamera.hide(),this.$screenCamera.find(".error").hide(),this.camera.powerOff(),this.$screenUpload.show()},i.SetupStaircase.prototype.switchScreenSelect=function(){this.$screenCamera.hide(),this.$screenUpload.hide(),this.$screenCamera.find(".error").hide(),this.$screenUpload.find(".error").hide(),this.camera.powerOff(),this.$screenSelect.show()},i.SetupStaircase.prototype.postImage=function(e){$.ajax({url:"/",method:"POST",data:data,beforeSend:function(){},success:function(e){},complete:function(){}})}}(this,document);